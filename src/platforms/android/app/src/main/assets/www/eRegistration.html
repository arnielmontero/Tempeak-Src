<!DOCTYPE html>
<html lang="en">

<head>
    <title>Choose Plan</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" href="./css/fontawesome.min.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css" />

    <!--
        <link href="/css/datepicker.css" rel="stylesheet" type="text/css">
        <link href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css">
    -->
    <link href="/css/datepicker.css" rel="stylesheet" type="text/css">
</head>

<body >

    <form>
        <div class="container">
            <h3 style="margin-top: 30px" class="form-group col-md-4 text-warning">Edit Profile</h3>

           
            <div class="form-group ">
                <div class="form-group">
                    <input type="text" class="form-control" id="firstname" placeholder="First name" required>
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" id="lastname" placeholder="Last name" required>
                </div>
                 <div class="form-group">
					<div class="row">
							<div class="d-flex align-items-center col-2">
								<span class="d-flex align-items-center" >DOB</span>
							</div>
							<div class="col-10">
							<!--	<input class="d-flex align-items-center form-control" type="date" id="date" name="date" type="text" placeholder="Birth of date" /> -->
								<input class="d-flex align-items-center form-control" data-toggle="modal" data-target="#dobmodal" readonly type="text" id="date" name="date" type="text" placeholder="Birth of date" />

							</div>


						<div class="modal fade" id="dobmodal" tabindex="-1" role="dialog" aria-labelledby="time1" aria-hidden="true">
							<div class="modal-dialog modal-dialog-centered" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="time1">DOB Edit</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>
									<div class="modal-body">
										<div class="container">

											<div class="row">
												<div class="col-4">
											<select class='year form-control' required>
												<option value="">Year</option>
												<option value="1940">1940</option>
												<option value="1941">1941</option>
												<option value="1942">1942</option>
												<option value="1943">1943</option>
												<option value="1944">1944</option>
												<option value="1945">1945</option>
												<option value="1946">1946</option>
												<option value="1947">1947</option>
												<option value="1948">1948</option>
												<option value="1949">1949</option>
												<option value="1950">1950</option>
												<option value="1951">1951</option>
												<option value="1952">1952</option>
												<option value="1953">1953</option>
												<option value="1954">1954</option>
												<option value="1955">1955</option>
												<option value="1956">1956</option>
												<option value="1957">1957</option>
												<option value="1958">1958</option>
												<option value="1959">1959</option>
												<option value="1960">1960</option>
												<option value="1961">1961</option>
												<option value="1962">1962</option>
												<option value="1963">1963</option>
												<option value="1964">1964</option>
												<option value="1965">1965</option>
												<option value="1966">1966</option>
												<option value="1967">1967</option>
												<option value="1968">1968</option>
												<option value="1969">1969</option>
												<option value="1970">1970</option>
												<option value="1971">1971</option>
												<option value="1972">1972</option>
												<option value="1973">1973</option>
												<option value="1974">1974</option>
												<option value="1975">1975</option>
												<option value="1976">1976</option>
												<option value="1977">1977</option>
												<option value="1978">1978</option>
												<option value="1979">1979</option>
												<option value="1980">1980</option>
												<option value="1981">1981</option>
												<option value="1982">1982</option>
												<option value="1983">1983</option>
												<option value="1984">1984</option>
												<option value="1985">1985</option>
												<option value="1986">1986</option>
												<option value="1987">1987</option>
												<option value="1988">1988</option>
												<option value="1989">1989</option>
												<option value="1990">1990</option>
												<option value="1991">1991</option>
												<option value="1992">1992</option>
												<option value="1993">1993</option>
												<option value="1994">1994</option>
												<option value="1995">1995</option>
												<option value="1996">1996</option>
												<option value="1997">1997</option>
												<option value="1998">1998</option>
												<option value="1999">1999</option>
												<option value="2000">2000</option>
												<option value="2001">2001</option>
											</select>
													</div>
												<div class="col-4">
											<select class='month form-control' required>
												<option value="01">Month</option>
												<option value="01">01</option>
												<option value="02">02</option>
												<option value="03">03</option>
												<option value="04">04</option>
												<option value="05">05</option>
												<option value="06">06</option>
												<option value="07">07</option>
												<option value="08">08</option>
												<option value="09">09</option>
												<option value="10">10</option>
												<option value="11">11</option>
												<option value="12">12</option>
											</select>
												</div>
												<div class="col-4">
											<select class='day form-control' required>
												<option value="">Day</option>
												<option value="01">01</option>
												<option value="02">02</option>
												<option value="03">03</option>
												<option value="04">04</option>
												<option value="05">05</option>
												<option value="06">06</option>
												<option value="07">07</option>
												<option value="08">08</option>
												<option value="09">09</option>
												<option value="10">10</option>
												<option value="11">11</option>
												<option value="12">12</option>
												<option value="12">13</option>
												<option value="14">14</option>
												<option value="15">15</option>
												<option value="16">16</option>
												<option value="17">17</option>
												<option value="18">18</option>
												<option value="19">19</option>
												<option value="20">20</option>
												<option value="21">21</option>
												<option value="22">22</option>
												<option value="23">23</option>
												<option value="24">24</option>
												<option value="25">25</option>
												<option value="26">26</option>
												<option value="27">27</option>
												<option value="28">28</option>
												<option value="29">29</option>
												<option value="30">30</option>
												<option value="31">31</option>
											</select>
												</div>




											</div>
											<br />
											<span class='text-warning error rem' ></span>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn-sm btn-secondary" data-dismiss="modal">Close</button>
										<button type="button" class="btn-sm btn-warning"  onclick="setdob()">Set</button>
									</div>
								</div>
							</div>
						</div>


					</div>

				</div>
			</div>
              <div class="form-group">
                  <select id="state" class="form-control"  >
					 <small class="form-text text-muted">Choose from "Contractor or Business Owner</small>
							<option value=""  >State</option>
							<option value="AL">Alabama</option>
							<option value="AK">Alaska</option>
							<option value="AZ" >Arizona</option>
							<option value="AR">Arkansas</option>
							<option value="CA">California</option>
							<option value="CO">Colorado</option>
							<option value="CT">Connecticut</option>
							<option value="DE">Delaware</option>
							<option value="DC">District of Columbia</option>
							<option value="FL">Florida</option>
							<option value="GA">Georgia</option>
							<option value="HI">Hawaii</option>
							<option value="ID">Idaho</option>
							<option value="IL">Illinois</option>
							<option value="IN">Indiana</option>
							<option value="IA">Iowa</option>
							<option value="KS">Kansas</option>
							<option value="KY">Kentucky</option>
							<option value="LA">Louisiana</option>
							<option value="ME">Maine</option>
							<option value="MD">Maryland</option>
							<option value="MA">Massachusetts</option>
							<option value="MI">Michigan</option>
							<option value="MN">Minnesota</option>
							<option value="MS">Mississippi</option>
							<option value="MO">Missouri</option>
							<option value="MT">Montana</option>
							<option value="NE">Nebraska</option>
							<option value="NV">Nevada</option>
							<option value="NH">New Hampshire</option>
							<option value="NJ">New Jersey</option>
							<option value="NM">New Mexico</option>
							<option value="NY">New York</option>
							<option value="NC">North Carolina</option>
							<option value="ND">North Dakota</option>
							<option value="OH">Ohio</option>
							<option value="OK">Oklahoma</option>
							<option value="OR">Oregon</option>
							<option value="PA">Pennsylvania</option>
							<option value="RI">Rhode Island</option>
							<option value="SC">South Carolina</option>
							<option value="SD">South Dakota</option>
							<option value="TN">Tennessee</option>
							<option value="TX">Texas</option>
							<option value="UT">Utah</option>
							<option value="VT">Vermont</option>
							<option value="VA">Virginia</option>
							<option value="WA">Washington</option>
							<option value="WV">West Virginia</option>
							<option value="WI">Wisconsin</option>
							<option value="WY">Wyoming</option>                                                      
						 </select>
                </div>
               
               <div class="form-group">
				<select id="city" name="city" class="form-control"  >
				<small class="form-text text-muted">Choose from "Contractor or Business Owner</small>
				<option value="">City</option>

				
			</select>
			   
			   </div>
               <div class="form-group">
				  <input type="text" id='address' class="form-control" placeholder="Address" required >
          
			   </div>
               <div class="form-group">
				  <input type="number" id='zip' class="form-control" placeholder="Zip code" required >
            
			   </div>
               <div class="form-group">
				 <input type="number" id='phone' class="form-control" placeholder="Phone" maxlength="10" required >
			   </div>
				  <div class="form-group">
					 <select id="experience" class="form-control"  >
					<small id="emailHelp" class="form-text text-muted">Choose from "Contractor or Business Owner</small>
					   <option value="">Years of Experience</option>
					   <option value="1-2">1-2 years</option>
					   <option value="2-5">2-5 years</option>
					   <option value="5-10">5-10 years</option>
					   <option value="10-more">Over 10 years</option>
					 </select>
			   </div>
               <div class="form-group">
				<input type="text" class="form-control" id="school" placeholder="What school you attend" required >
           
			   </div>
               <div class="form-group">
					<div class="row">
							<div class="d-flex align-items-center col-4">
								<span class="d-flex align-items-center">Graduation</span>
							</div>
							<div class="col-8">
								<!--<input class="d-flex align-items-center form-control" id="graduation" name="date" type="date"  /> -->
								<input readonly class="d-flex align-items-center form-control" data-toggle="modal" data-target="#gradmodal" id="graduation" name="date" type="text"  />
							</div>

						<div class="modal fade" id="gradmodal" tabindex="-1" role="dialog" aria-labelledby="time1" aria-hidden="true">
							<div class="modal-dialog modal-dialog-centered" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="time1">Edit Graduation</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>
									<div class="modal-body">
										<div class="container">

											<div class="row">
												<div class="col-4">
													<select class='gradyear form-control' required>
														<option value="">Year</option>
														<option value="1940">1940</option>
														<option value="1941">1941</option>
														<option value="1942">1942</option>
														<option value="1943">1943</option>
														<option value="1944">1944</option>
														<option value="1945">1945</option>
														<option value="1946">1946</option>
														<option value="1947">1947</option>
														<option value="1948">1948</option>
														<option value="1949">1949</option>
														<option value="1950">1950</option>
														<option value="1951">1951</option>
														<option value="1952">1952</option>
														<option value="1953">1953</option>
														<option value="1954">1954</option>
														<option value="1955">1955</option>
														<option value="1956">1956</option>
														<option value="1957">1957</option>
														<option value="1958">1958</option>
														<option value="1959">1959</option>
														<option value="1960">1960</option>
														<option value="1961">1961</option>
														<option value="1962">1962</option>
														<option value="1963">1963</option>
														<option value="1964">1964</option>
														<option value="1965">1965</option>
														<option value="1966">1966</option>
														<option value="1967">1967</option>
														<option value="1968">1968</option>
														<option value="1969">1969</option>
														<option value="1970">1970</option>
														<option value="1971">1971</option>
														<option value="1972">1972</option>
														<option value="1973">1973</option>
														<option value="1974">1974</option>
														<option value="1975">1975</option>
														<option value="1976">1976</option>
														<option value="1977">1977</option>
														<option value="1978">1978</option>
														<option value="1979">1979</option>
														<option value="1980">1980</option>
														<option value="1981">1981</option>
														<option value="1982">1982</option>
														<option value="1983">1983</option>
														<option value="1984">1984</option>
														<option value="1985">1985</option>
														<option value="1986">1986</option>
														<option value="1987">1987</option>
														<option value="1988">1988</option>
														<option value="1989">1989</option>
														<option value="1990">1990</option>
														<option value="1991">1991</option>
														<option value="1992">1992</option>
														<option value="1993">1993</option>
														<option value="1994">1994</option>
														<option value="1995">1995</option>
														<option value="1996">1996</option>
														<option value="1997">1997</option>
														<option value="1998">1998</option>
														<option value="1999">1999</option>
														<option value="2000">2000</option>
														<option value="2001">2001</option>
														<option value="2001">2002</option>
														<option value="2001">2003</option>
														<option value="2001">2004</option>
														<option value="2001">2005</option>
														<option value="2001">2006</option>
														<option value="2001">2007</option>
														<option value="2001">2008</option>
														<option value="2001">2009</option>
														<option value="2001">2010</option>
														<option value="2001">2011</option>
														<option value="2001">2012</option>
														<option value="2001">2013</option>
														<option value="2001">2014</option>
														<option value="2001">2015</option>
														<option value="2001">2016</option>
														<option value="2001">2017</option>
														<option value="2001">2018</option>
														<option value="2001">2019</option>
													</select>
												</div>
												<div class="col-4">
													<select class='gradmonth form-control' required>
														<option value="01">Month</option>
														<option value="01">01</option>
														<option value="02">02</option>
														<option value="03">03</option>
														<option value="04">04</option>
														<option value="05">05</option>
														<option value="06">06</option>
														<option value="07">07</option>
														<option value="08">08</option>
														<option value="09">09</option>
														<option value="10">10</option>
														<option value="11">11</option>
														<option value="12">12</option>
													</select>
												</div>
												<div class="col-4">
													<select class='gradday form-control' required>
														<option value="">Day</option>
														<option value="01">01</option>
														<option value="02">02</option>
														<option value="03">03</option>
														<option value="04">04</option>
														<option value="05">05</option>
														<option value="06">06</option>
														<option value="07">07</option>
														<option value="08">08</option>
														<option value="09">09</option>
														<option value="10">10</option>
														<option value="11">11</option>
														<option value="12">12</option>
														<option value="12">13</option>
														<option value="14">14</option>
														<option value="15">15</option>
														<option value="16">16</option>
														<option value="17">17</option>
														<option value="18">18</option>
														<option value="19">19</option>
														<option value="20">20</option>
														<option value="21">21</option>
														<option value="22">22</option>
														<option value="23">23</option>
														<option value="24">24</option>
														<option value="25">25</option>
														<option value="26">26</option>
														<option value="27">27</option>
														<option value="28">28</option>
														<option value="29">29</option>
														<option value="30">30</option>
														<option value="31">31</option>
													</select>
												</div>




											</div>
											<br />
											<span class='graderror text-warning' ></span>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn-sm btn-secondary" data-dismiss="modal">Close</button>
										<button type="button" class="btn-sm btn-warning"  onclick="setgrad()">Set</button>
									</div>
								</div>
							</div>
						</div>



					</div>
               </div>
             <div class="form-group">
                      <input type="text" class="form-control" id="license_number" placeholder="License Number" required >
                    </div>
			<div class="form-group">
                          <input type="number" class="form-control" id="distance" placeholder="No. of miles to commute" required >
                        </div>
			 <div class="form-group">
                              <input type="number" class="form-control" id="salary" placeholder="Hourly salary" required >
                            </div>			
           
				
                 <!--<div class="form-group">
                    <input type="text" class="form-control date-widget" id='birthday' placeholder="Date of Birth" required>
                </div>-->
            </div>
		<div class="form-group">
            <div class="bootstrap-iso">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6 col-sm-6 col-xs-12">

                            <!-- Form code begins    -->
                            <div class="row">
                               
                            </div>
                            <br>
                        
                            <!-- Form code ends -->
                          <div class="msg text-success" ></div>
                            <br />

                            <!--   <a href="./Registration2.html" class="btn btn-warning btn-prima btn-block" id="next" role="button">Next</a>-->

                            <button type='submit' class="btn btn-warning btn-prima" id="eregister">Update</button>
                            <div href="#" class="btn btn-warning btn-prima" id="cllee" >Close</div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </form>
    <br>
    <div class="container">
            <p style="margin-top:20px">Need Help? <a href="#">FAQ Here!</a></p>
            <p><a href="./PrivacyPolicy.html">Privacy Policy</a> and <a href="./termsofuse.html">Terms of Use</a> </p>

    </div>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <!-- additional links  -->
    <script type="text/javascript" src="js/jquery.ui.js"></script>
    <script type="text/javascript" src="js/jquery.moment.js"></script>
    <script type="text/javascript" src="js/bootstrap-datepicker.js"></script>
	
	<script type="text/javascript" src="http://tp.loyaltypower7.com/js/url-ver.js"></script>	

	
	<script>
	
		function setdob(){
			var dobyear = $('.year').val();
			var dobmonth = $('.month').val();
			var dobday = $('.day').val();

			$("#rem").remove();
			if(dobyear != "" && dobmonth != "" && dobday != ""){
				$('#date').val(dobyear +'-'+ dobmonth +'-'+ dobday);
				$('#dobmodal').modal('hide');
			}else{

				$(".error").append("<center><span id='rem'>Please complete the following year, month and day.</span></center>");
			}

		}

		function setgrad(){

			var gradyear = $('.gradyear').val();
			var gradmonth = $('.gradmonth').val();
			var gradday = $('.gradday').val();


			$("#rem").remove();
			if(gradyear != "" && gradmonth != "" && gradday != ""){
				$('#graduation').val(gradyear +'-'+ gradmonth +'-'+ gradday);

				$('#gradmodal').modal('hide');

			}else{

				$(".graderror").append("<center><span id='rem'>Please complete  the following year, month and day.</span></center>");
			}
		}
	
		$(document).ready(function(){

			
			var link = window.location.href; 
			var url = new URL(link);
			var keyr = url.searchParams.get("key");
				
			if(keyr !== ""){
				sessionStorage.setItem('key', keyr);
			}							
			var key = sessionStorage.getItem("key");
			
			$('#cllee').click(function(e){			
			
				setTimeout(function(){											
						window.location.href="./profilecontractor.html?key="+key;
						<!-- window.location.href="./profilecontractor.html"; -->
				}, 0);		
				e.preventDefault();
			});
			
			var form_datas = new FormData(); 				
			form_datas.append('key', key);
			
			
				$.ajax({
					url: hosturl +'information', // point to server-side PHP script 
					dataType: 'text',  // what to expect back from the PHP script, if anything
					cache: false,
					contentType: false,
					processData: false,
					data: form_datas,                         
					type: 'post',
					success: function(data){				
						datamas(data);		
					}
				 });					
			
			
			
			function datamas(x){				
				var info = JSON.parse(x);						
				$('#firstname').val(info[0].first_name);
				$('#lastname').val(info[0].last_name);
				$('#date').val(info[0].birthday);
				$('#address').val(info[0].address);
				$('#zip').val(info[0].zip_code);
				$('#phone').val(info[0].phone);
				$('#school').val(info[0].school);
				$('#graduation').val(info[0].graduation);
				$('#license_number').val(info[0].license_number);
				$('#distance').val(info[0].distance);
				$('#salary').val(info[0].salary);	
				sessionStorage.setItem('userid',info[0].user_id);
				sessionStorage.setItem('keys',info[0].remember_token);


				$('#state option[value='+info[0].state+']').attr('selected','selected');


					var form_datas_cities = new FormData();
					form_datas_cities.append('state', info[0].state);
					var citys = $("#city");
					var selectedcities = "";
					$.ajax({

						url: hosturl +'cities',
						dataType: 'text',  // what to expect back from the PHP script, if anything
						cache: false,
						contentType: false,
						processData: false,
						data: form_datas_cities,
						type: 'post',
						success: function(response){

							var selectcity = "";

							citys.html("");
							citys.append("<option value=''>City</option>");

							if(response.length > 0) {

								var jp = JSON.parse(response);

								$.each(jp, function (i, value) {

									if(info[0].city === value ){
										selectcity = "selected = selected";
									}else{
										selectcity = "";
									}

								   citys.append("<option  "+ selectcity +" value='"+value+"'>"+value+"</option>");


								});
							}
						},
						error:function(msg){}
					});
			}			 

				
			$('#eregister').click(function(e){
				var userid = sessionStorage.getItem('userid');
				var keys = sessionStorage.getItem('keys');
			
			
			
				var firstname = $('#firstname').val(),
					lastname = $('#lastname').val(),
					address = $('#address').val(),
					zip = $('#zip').val(),
					phone = $('#phone').val(),
					school = $('#school').val(),
					license_number = $('#license_number').val(),
					experience = $('#experience').val(),					
					date = $('#date').val(),
					state = $('#state').val(),
					city = $('#city').val(),			
					graduation = $('#graduation').val();
					salary = $('#salary').val();
					distance = $('#distance').val();





				var form_data = new FormData(); 

					form_data.append('firstname', firstname);
					form_data.append('lastname', lastname);
					form_data.append('address', address);
					form_data.append('zip', zip);
					form_data.append('phone', phone);
					form_data.append('school', school);
					form_data.append('license_number', license_number);
					form_data.append('salary', salary);
					form_data.append('distance', distance);
					form_data.append('id', userid);
					form_data.append('key', keys);
			
				
				if(date !== ""){
					form_data.append('dob', date);
				}
				if(state !== ""){
					form_data.append('state', state);
				}
				if(city !== ""){
					form_data.append('city', city);
				}
				if(graduation !== ""){
					form_data.append('graduation', graduation);
				}				
					$.ajax({
						url: hosturl +'update_contractor_information', // point to server-side PHP script 
						dataType: 'text',  // what to expect back from the PHP script, if anything
						cache: false,
						contentType: false,
						processData: false,
						data: form_data,                         
						type: 'post',
						success: function(data){	

							<!-- alert(data); -->
							<!-- sessionStorage.setItem("info", data);							 -->
							$('div.msg').text("Information successfully update.");
						}
					 });			 

					 
				e.preventDefault();	
					 
			});		
			$('#state value:contains(az)').prop('selected',true);
		
		});
	
		

	
	</script>
	  
	<!--  end here-->
	


</body>

</html>